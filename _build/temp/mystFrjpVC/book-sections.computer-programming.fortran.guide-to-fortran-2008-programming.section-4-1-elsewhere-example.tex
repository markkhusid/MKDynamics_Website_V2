\begin{verbatim}
- - -
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
kernelspec:
  display_name: Python 3
  language: python
  name: python3
 - - -
\end{verbatim}

\subparagraph{Section 4.1: Elsewhere Example}

Adapted from: ``Guide to Fortran 2008 Programming'' by Walter S. Brainerd (Springer 2015)

\subparagraph{Program to demonstrate the use of the \textit{elsewhere} construct.}

\begin{verbatim}
program elsewhere_example

    implicit none
    integer, parameter          :: n = 15
    integer, dimension(n, n)    :: key
    integer                     :: i, j
    real, dimension(n, n)       :: a

    call random_number(a)
    do i = 1, n
        do j = 1, n
            if (i > j) then
                ! Put negative numbers below the diagonal
                a(i, j) = -a(i, j) - 2.0
            else if (i < j) then
                ! Put positive numbers above the diagonal
                a(i, j) = a(i, j) + 2.0
            else
                ! Put zeros on the diagonal
                a(i, j) = 0.0
            end if
        end do
    end do

    where (a > 0)
        key = 1
    elsewhere (a < 0)
        key = -1
    elsewhere
        key = 0
    end where

    write (*, "(15f5.1)") (a(i,:), i=1,n)
    print *
    write (*, "(15i5)") (key(i,:), i=1,n)
end program elsewhere_example
\end{verbatim}

The above program is compiled and run using Fortran Package Manager (fpm):

\begin{verbatim}
import os
root_dir = os.getcwd()
\end{verbatim}

\begin{verbatim}
code_dir = root_dir + "/" + "Fortran_Code/Section_4_1_Elsewhere_Example"
\end{verbatim}

\begin{verbatim}
os.chdir(code_dir)
\end{verbatim}

\begin{verbatim}
build_status = os.system("fpm build 2>/dev/null")
\end{verbatim}

\begin{verbatim}
exec_status = os.system("fpm run 2>/dev/null")
\end{verbatim}

\begin{verbatim}
0.0  2.9  2.7  2.0  2.7  2.9  3.0  2.6  2.9  2.3  2.7  2.6  2.6  2.8  2.8
 -2.0  0.0  2.8  2.1  2.6  2.6  2.5  2.9  2.6  2.0  2.9  2.2  3.0  2.2  2.7
 -3.0 -2.6  0.0  2.8  2.4  2.1  2.8  2.1  2.6  2.5  2.4  2.7  2.6  2.6  2.6
 -2.5 -2.0 -3.0  0.0  2.6  2.4  2.9  2.2  2.5  2.1  2.5  2.0  2.3  2.7  2.2
 -2.9 -2.8 -2.4 -2.1  0.0  2.5  2.8  2.8  2.8  2.0  2.8  2.2  2.8  2.4  2.4
 -2.3 -2.7 -2.9 -2.7 -2.6  0.0  2.8  2.3  2.5  2.8  2.5  3.0  2.9  2.7  2.3
 -2.2 -2.2 -2.6 -2.2 -2.9 -2.1  0.0  2.2  2.0  2.8  2.1  2.3  2.2  2.4  2.2
 -2.4 -2.7 -3.0 -2.4 -2.3 -2.3 -2.5  0.0  2.2  2.7  2.9  2.1  2.9  2.6  2.2
 -2.4 -2.6 -2.1 -2.5 -2.2 -2.2 -3.0 -2.3  0.0  2.4  2.2  2.5  2.2  2.8  2.1
 -2.4 -2.9 -2.2 -2.9 -2.3 -2.4 -2.0 -2.3 -2.1  0.0  2.4  2.1  2.2  2.7  2.8
 -2.2 -2.1 -3.0 -2.7 -2.5 -2.4 -2.9 -2.7 -2.8 -2.8  0.0  2.9  2.1  2.2  2.8
 -2.8 -2.4 -2.7 -2.3 -2.9 -2.2 -2.7 -2.3 -3.0 -2.6 -2.5  0.0  2.8  3.0  2.5
 -2.4 -2.1 -2.9 -2.9 -2.2 -2.3 -2.7 -2.3 -2.6 -2.1 -2.4 -2.4  0.0  3.0  2.3
 -2.4 -2.9 -2.3 -2.9 -2.5 -2.0 -2.9 -2.3 -2.2 -2.6 -2.7 -2.4 -2.4  0.0  2.1
 -2.2 -2.3 -2.8 -2.6 -2.3 -2.2 -2.3 -2.4 -2.5 -2.6 -2.1 -2.4 -2.4 -2.8  0.0

    0    1    1    1    1    1    1    1    1    1    1    1    1    1    1
   -1    0    1    1    1    1    1    1    1    1    1    1    1    1    1
   -1   -1    0    1    1    1    1    1    1    1    1    1    1    1    1
   -1   -1   -1    0    1    1    1    1    1    1    1    1    1    1    1
   -1   -1   -1   -1    0    1    1    1    1    1    1    1    1    1    1
   -1   -1   -1   -1   -1    0    1    1    1    1    1    1    1    1    1
   -1   -1   -1   -1   -1   -1    0    1    1    1    1    1    1    1    1
   -1   -1   -1   -1   -1   -1   -1    0    1    1    1    1    1    1    1
   -1   -1   -1   -1   -1   -1   -1   -1    0    1    1    1    1    1    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1    0    1    1    1    1    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1    0    1    1    1    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1    0    1    1    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1    0    1    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1    0    1
   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1   -1    0
\end{verbatim}