{"version":3,"kind":"Notebook","sha256":"3fc66dd2e9a4e68b613f268cc80e10569cb9ea0ad0e4ed58a9dc473dfab7aae6","slug":"sections.computer-programming.python.python-playground.section-chapter-2-draw-spiro","location":"/Sections/Computer_Programming/Python/Python_Playground/Section_Chapter_2_Draw_Spiro.ipynb","dependencies":[],"frontmatter":{"title":"Chapter 2: Draw Spiro using Turtle Graphics","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Mark Khusid","given":"Mark","family":"Khusid"},"name":"Mark Khusid","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/markkhusid/MKDynamics_Website_V2","numbering":{"title":{"offset":4}},"source_url":"https://github.com/markkhusid/MKDynamics_Website_V2/blob/master/Sections/Computer_Programming/Python/Python_Playground/Section_Chapter_2_Draw_Spiro.ipynb","edit_url":"https://github.com/markkhusid/MKDynamics_Website_V2/edit/master/Sections/Computer_Programming/Python/Python_Playground/Section_Chapter_2_Draw_Spiro.ipynb","exports":[{"format":"ipynb","filename":"Section_Chapter_2_Draw_Spiro.ipynb","url":"/Section_Chapter_2_Dr-558bff5c875e12c9dd2795c699cb9620.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"---\njupytext:\n  formats: md:myst\n  text_representation:\n    extension: .md\n    format_name: myst\nkernelspec:\n  display_name: Python 3\n  language: python\n  name: python3\n---","key":"b6uFdm84dl"}],"key":"r4VyyyzoE4"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Chapter 2: Draw Spiro using Turtle Graphics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oxMwCezVrY"}],"identifier":"chapter-2-draw-spiro-using-turtle-graphics","label":"Chapter 2: Draw Spiro using Turtle Graphics","html_id":"chapter-2-draw-spiro-using-turtle-graphics","implicit":true,"key":"HA4Nk4OV05"}],"visibility":"show","key":"h5yivbR8iG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Adapted from: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d65Fu4SykV"},{"type":"link","url":"https://www.amazon.com/Python-Playground-2nd-Mahesh-Venkitachalam/dp/1718503040/ref=sr_1_4?keywords=python+playground&sr=8-4","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"“Python Playground: Geeky Projects for the Curious Programmer”","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XkyKpTQIpo"}],"urlSource":"https://www.amazon.com/Python-Playground-2nd-Mahesh-Venkitachalam/dp/1718503040/ref=sr_1_4?keywords=python+playground&sr=8-4","key":"YybQnWhsFb"},{"type":"text","value":" by Mahesh Venkitachalam (No Starch Press)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sWhSG2WflE"}],"key":"mKrSKUGauW"}],"key":"zHiixhLnMj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This program demonstrates drawing a spirograph using turtle graphics.  This is very similar to using the LOGO language for years gone by.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fSyHBU8rfh"}],"key":"KsCR0hgYl9"}],"key":"LaZ5AZh8fl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In file spiro.py","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wk4SH5vXKC"}],"identifier":"in-file-spiro-py","label":"In file spiro.py","html_id":"in-file-spiro-py","implicit":true,"key":"syeFcW6gvy"}],"key":"WUxVAVIUED"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Python_Code/Chapter_2/spiro.py","literal":true,"children":[{"type":"code","value":"import sys, random, argparse\nimport numpy as np\nimport math\nimport turtle\nimport random\nfrom PIL import Image\nfrom datetime import datetime\n#from fractions import gcd\n\n# a class that draws a Spirograph\nclass Spiro:\n\t# constructor\n\tdef __init__(self, xc, yc, col, R, r, l):\n\n\t\t# create the turtle object\n\t\tself.t = turtle.Turtle()\n\t\t# set the cursor shape\n\t\tself.t.shape('turtle')\n\t\t# set the step in degrees\n\t\tself.step = 5\n\t\t# set the drawing complete flag\n\t\tself.drawingComplete = False\n\n\t\t# set the parameters\n\t\tself.setparams(xc, yc, col, R, r, l)\n\n\t\t# initialize the drawing\n\t\tself.restart()\n\n\t# set the parameters\t\n\tdef setparams(self, xc, yc, col, R, r, l):\n\t\n\t\t# The spirograph parameters\n\t\tself.xc = xc\n\t\tself.yc = yc\n\t\tself.R = int(R)\n\t\tself.r = int(r)\n\t\tself.l = l\n\t\tself.col = col\n\t\t# Reduce r/R to its smallest form by dividing with the GCD\n\t\tgcdVal = math.gcd(self.r, self.R)\n\t\tself.nRot = self.r // gcdVal\n\t\t# get ratio of radii\n\t\tself.k = r / float(R)\n\t\t# set the color\n\t\tself.t.color(*col)\n\t\t# store the current angle\n\t\tself.a = 0\n\n\t# restart the drawing\n\tdef restart(self):\n\t\t# set the flag\n\t\tself.drawingComplete = False\n\t\t# show the turtle\n\t\tself.t.showturtle()\n\t\t# go to the first point\n\t\tself.t.up()\n\t\tR, k, l = self.R, self.k, self.l\n\t\ta = 0.0\n\t\tx = R*((1-k)*math.cos(a) + l*k*math.cos((1-k)*a/k))\n\t\ty = R*((1-k)*math.sin(a) + l*k*math.sin((1-k)*a/k))\n\t\tself.t.setpos(self.xc + x, self.yc + y)\n\t\tself.t.down()\n\n\n\t# draw the whole thing\n\tdef draw(self):\n\t\t# draw the rest of the points\n\t\tR, k, l = self.R, self.k, self.l\n\t\tfor i in range(0, 360*self.nRot + 1, self.step):\n\t\t\ta = math.radians(i)\n\t\t\tx = R*((1-k)*math.cos(a) + 1*k*math.cos((1-k)*a/k))\n\t\t\ty = R*((1-k)*math.sin(a) - 1*k*math.sin((1-k)*a/k))\n\t\t\tself.t.setpos(self.xc + x, self.yc + y)\n\t\t# drawing is now done so hide the turtle cursor\n\t\tself.t.hideturtle()\n\n\t# update by one step\n\tdef update(self):\n\t\t# skip the rest of the steps if done\n\t\tif self.drawingComplete:\n\t\t\treturn\n\t\t# increment the angle\n\t\tself.a += self.step\n\t\t# draw a step\n\t\tR, k, l = self.R, self.k, self.l\n\t\ta = math.radians(self.a)\n\t\tx = self.R*((1-k)*math.cos(a) + 1*k*math.cos((1-k)*a/k))\n\t\ty = self.R*((1-k)*math.sin(a) - 1*k*math.sin((1-k)*a/k))\n\t\tself.t.setpos(self.xc + x, self.yc + y)\n\t\t# if drawing is complete, set the flag\n\t\tif self.a >= 360*self.nRot:\n\t\t\tself.drawingComplete = True\n\t\t\t# drawing is now done so hide the turtle cursor\n\t\t\tself.t.hideturtle()\n\n\n# a class for animating Spirographs\nclass SpiroAnimator:\n\t# constructor\n\tdef __init__(self, N):\n\t\t# set the timer value in milliseconds\n\t\tself.deltaT = 10\n\t\t# get the window dimensions\n\t\tself.width = turtle.window_width()\n\t\tself.height = turtle.window_height()\n\t\t# create the Spiro objects\n\t\tself.spiros = []\n\t\tfor i in range(N):\n\t\t\t# generate random parameters\n\t\t\trparams = self.genRandomParams()\n\t\t\t#  set the spiro parameters\n\t\t\tspiro = Spiro(*rparams)\n\t\t\tself.spiros.append(spiro)\n\t\t# call timer\n\t\tturtle.ontimer(self.update, self.deltaT)\n\n\t# generate random parameters\n\tdef genRandomParams(self):\n\t\twidth, height = self.width, self.height\n\t\tR = random.randint(50, min(width, height)//2)\n\t\tr = random.randint(10, 9*R//10)\n\t\tl = random.uniform(0.1, 0.9)\n\t\txc = random.randint(-width//2, width//2)\n\t\tyc = random.randint(-height//2, height//2)\n\t\tcol = (random.random(), random.random(), random.random())\n\t\treturn (xc, yc, col, R, r, l)\n\n\t# restart spiro drawing\n\tdef restart(self):\n\t\tfor spiro in self.spiros:\n\t\t\t# clear\n\t\t\tspiro.clear()\n\t\t\t# generate random parameters\n\t\t\trparams = self.genRandomParams()\n\t\t\t# set the spiro parameters\n\t\t\tspiro.setparams(*rparams)\n\t\t\t# restart the drawing\n\t\t\tspiro.restart()\n\n\tdef update(self):\n\t\t# update all spiros\n\t\tnComplete = 0\n\t\tfor spiro in self.spiros:\n\t\t\t# update\n\t\t\tspiro.update()\n\t\t\t# count completed spiros\n\t\t\tif spiro.drawingComplete:\n\t\t\t\tnComplete += 1\n\t\t# restart if all spiros are complete\n\t\tif nComplete == len(self.spiros):\n\t\t\tself.restart()\n\t\t# call the timer\n\t\tturtle.ontimer(self.update, self.deltaT)\n\n\t# toggle turtle cursor on and off\n\tdef toggleTurtles(self):\n\t\tfor spiro in self.spiros:\n\t\t\tif spiro.t.invisible():\n\t\t\t\tspiro.t.hideturtle()\n\t\t\telse:\n\t\t\t\tspiro.t.showturtle()\n\n# save drawings as PNG files\ndef saveDrawing():\n\t# hide turtle cursor\n\tturtle.hideturtle()\n\t# generate unique filenames\n\tdateStr = (datetime.now()).strftime(\"%d%b%Y-%H%M%S\")\n\tfileName = 'spiro-' + dateStr\n\tprint('saving drawing to %s.eps/png' % fileName)\n\t# get the tkinter canvas\n\tcanvas = turtle.getcanvas()\n\t# save the drawing as a postscript image\n\tcanvas.postscript(file = fileName + '.eps')\n\t# use the Pillow module to convert the postscript image file to PNG\n\timg = Image.open(fileName + '.eps')\n\timg.save(fileName + '.png', 'png')\n\t# show the turtle cursor\n\tturtle.showturtle()\n\n# main() function\ndef main():\n\t# use sys.argv if needed\n\tprint('generating spirograph...')\n\t# create parser\n\tdescStr = \"\"\"This program draws Spirographs using the Turtle module.\n\tWhen run with no arguments, this program draws random Spirographs.\n\n\tTerminology:\n\n\tR: radius of outer circle\n\tr: radius of inner circle\n\tl: ratio of hole distance to r\n\n\t\"\"\"\n\n\tparser = argparse.ArgumentParser(description = descStr)\n\n\t# add expected arguments\n\tparser.add_argument('--sparams', nargs = 3, dest='sparams', required = False, help = \"The three arguments in sparams: R, r, l.\")\n\n\t# parse args\n\targs = parser.parse_args()\n\n\t# set the width of the drawing window to 80 percent of the screen \n\tturtle.setup(width = 0.8)\n\n\t# set the cursor shape to turtle\n\tturtle.shape('turtle')\n\n\t# set the title to Spirographs!\n\tturtle.title(\"Spirographs!\")\n\t# add the key handler to save our drawings\n\tturtle.onkey(saveDrawing, \"s\")\n\t# start listening\n\tturtle.listen()\n\n\t# hide the main turtle cursor\n\tturtle.hideturtle()\n\n\t# check for any arguments sent to --sparams and draw the Spirograph\n\tif args.sparams:\n\t\tparams = [float(x) for x in args.sparams]\n\t\t# draw the Spirograph with the given parameters\n\t\tcol = (0.0, 0.0, 0.0)\n\t\tspiro = Spiro(0, 0, col, *params)\n\t\tspiro.draw()\n\telse:\n\t\t# create the animator object\n\t\tspiroAnim = SpiroAnimator(4)\n\t\t# add a key handler to toggle the turtle cursor\n\t\tturtle.onkey(spiroAnim.toggleTurtles, \"t\")\n\t\t# add a key handler to restart the animation\n\t\tturtle.onkey(spiroAnim.restart, \"space\")\n\t\t\n\t# start the turtle main loop\n\tturtle.mainloop()\n\n# call main\nif __name__ == '__main__':\n\tmain()","lang":"python","filename":"spiro.py","key":"cEa7XYERVG"}],"key":"hazf8JSA8X"}],"key":"MS8VAQKis7"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above program is directly into Jupyter Lab and executed by the Python Kernel:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BMhioU81Z8"}],"key":"Pdii78c7cF"}],"key":"T4xBy7YFg7"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Display the Program Output in Jupyter Lab","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OMoZGnfx9k"}],"identifier":"display-the-program-output-in-jupyter-lab","label":"Display the Program Output in Jupyter Lab","html_id":"display-the-program-output-in-jupyter-lab","implicit":true,"key":"dx7ljSgunm"}],"visibility":"show","key":"LmDvQpG2PA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nroot_dir = \"\"\nroot_dir = os.getcwd()","key":"fHrpEpGwbR"},{"type":"outputs","id":"y0_G5ssGiY6UbCy3b0c3O","children":[],"key":"DuNnY8bown"}],"key":"gdzymoUQOo"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"code_dir = root_dir + \"/\" + \"Python_Code/Chapter_2/\"","visibility":"show","key":"bI32Jp6Dmw"},{"type":"outputs","id":"2aqKBhQYQCUpKpgCIDLjo","children":[],"visibility":"show","key":"ATwCJ7xmg1"}],"visibility":"show","key":"Sq3uWNNxNm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"os.chdir(code_dir)","key":"kIE9NKrZUd"},{"type":"outputs","id":"y1RP8dWyPfxr2EX1G2QB-","children":[],"key":"tvh7QVddLJ"}],"key":"NuP95gZQrM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A window opens up with the output.  The output is saved to an image file.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pt5gXlfFey"}],"key":"aHQVh2iRqW"}],"key":"mzf5Z05LiG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from IPython.display import display\nfrom PIL import Image\nimg_PIL = Image.open(r'Images/spiro.png')\ndisplay(img_PIL)","key":"FoCtasZJUN"},{"type":"outputs","id":"bqb7qIAiwphFGw-6Y0iyb","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/jpeg":{"content_type":"image/jpeg","hash":"1868278292d6a6a215b0459c2e7d6de4","path":"/1868278292d6a6a215b0459c2e7d6de4.jpeg"},"image/png":{"content_type":"image/png","hash":"d01c607e1a3b4c01d15dd3cc61007112","path":"/d01c607e1a3b4c01d15dd3cc61007112.png"},"text/plain":{"content":"<PIL.PngImagePlugin.PngImageFile image mode=RGB size=799x542>","content_type":"text/plain"}}},"children":[],"key":"u93X7Hlcbt"}],"key":"MB35wDQ39z"}],"key":"kcIecKtogn"}],"key":"k2ffvsU1B6"},"references":{"cite":{"order":[],"data":{}}}}