{"version":3,"kind":"Notebook","sha256":"c8938ded2bbdbd50774247126732ffb209d1ecc0a1fb4ad9e9e8bf4e4052902f","slug":"sections.computer-programming.fortran.intro-to-fortran.section-12-8-line-numbers","location":"/Sections/Computer_Programming/Fortran/Intro_to_Fortran/Section_12_8_Line_Numbers.ipynb","dependencies":[],"frontmatter":{"title":"Section 12.8: Line Numbers","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Mark Khusid","given":"Mark","family":"Khusid"},"name":"Mark Khusid","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/markkhusid/MKDynamics_Website_V2","numbering":{"title":{"offset":4}},"source_url":"https://github.com/markkhusid/MKDynamics_Website_V2/blob/master/Sections/Computer_Programming/Fortran/Intro_to_Fortran/Section_12_8_Line_Numbers.ipynb","edit_url":"https://github.com/markkhusid/MKDynamics_Website_V2/edit/master/Sections/Computer_Programming/Fortran/Intro_to_Fortran/Section_12_8_Line_Numbers.ipynb","exports":[{"format":"ipynb","filename":"Section_12_8_Line_Numbers.ipynb","url":"/Section_12_8_Line_Nu-ac99aa594001c7feebacc2298047413d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"---\njupytext:\n  formats: md:myst\n  text_representation:\n    extension: .md\n    format_name: myst\nkernelspec:\n  display_name: Python 3\n  language: python\n  name: python3\n---","key":"iMbGXVmVdy"}],"key":"DlPFU0Z8GL"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Section 12.8: Line Numbers","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cFIR6PGRU7"}],"identifier":"section-12-8-line-numbers","label":"Section 12.8: Line Numbers","html_id":"section-12-8-line-numbers","implicit":true,"key":"ejDq1iV5rQ"}],"visibility":"show","key":"cJkCar5FC8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Adapted from: “","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bohWbjZA8T"},{"type":"link","url":"https://open.umn.edu/opentextbooks/textbooks/introduction-to-programming-using-fortran-95-2003-2008","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction to Programming Using Fortran 95/2003/2008","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KSGtePahKP"}],"urlSource":"https://open.umn.edu/opentextbooks/textbooks/introduction-to-programming-using-fortran-95-2003-2008","key":"Bv58wFMclG"},{"type":"text","value":"” by Ed Jorgensen (March 2018 / Version 3.0.51).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AbKK5x1ziE"}],"key":"xp0oADRSEx"}],"key":"BPHSSri2if"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Program to add line numbers to each line in a text file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JUYarfsrTZ"}],"identifier":"program-to-add-line-numbers-to-each-line-in-a-text-file","label":"Program to add line numbers to each line in a text file","html_id":"program-to-add-line-numbers-to-each-line-in-a-text-file","implicit":true,"key":"cgqJRynfq5"}],"key":"g6hYmMP5UC"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Fortran_Code/Section_12_8_Line_Numbers/app/section_12_8_line_numbers.f90","literal":true,"children":[{"type":"code","value":"program linenumbers\n\n! declare variables\n\nimplicit none\n\ninteger             :: i, rdopst, wropst, rdst\ncharacter(30)       :: rdfile, wrfile\ncharacter(132)      :: line\n\n! --------------------\n! dsiplay initial header\n\nprint *\nwrite (*,'(a)') \"Line Number Example Program\"\n\n! --------------------\n! Set rdfile to input_test_file.txt for Jupyter Notebook\nrdfile = \"input_test_file.txt\"\n\nopen (  12, file = rdfile, status = \"old\",      &\n        action = \"read\", position = \"rewind\",   &\n        iostat = rdopst )\n\n! Check if file exists\nprint * ! skip a line on screen\nif (rdopst /= 0) then\n    write (*, '(a,a)', advance = \"no\") \"Unable to open input file -> \", rdfile\n    stop\nelse\n    write (*, '(a,a)', advance=\"no\") \"Opened input file for reading -> \", rdfile\nend if\nprint * ! skip a line on screen\n\n! --------------------\n! Set wrfile to output_test_file for Jupyter Notebook\n\nwrfile = \"output_test_file.txt\"\n\nopen (  14, file = wrfile, status = \"replace\",  &\n        action = \"write\", position = \"rewind\",  &\n        iostat = wropst )\n\nprint * ! skip a line on screen\nif (wropst /= 0) then\n    write (*, '(a,a)', advance=\"no\") \"Unable to open output file -> \", wrfile\n    stop\nelse \n    write (*, '(a,a)', advance=\"no\") \"Opened output file for writing -> \", wrfile\nend if\nprint * ! skip a line on screen\n\n! --------------------\n! Process input file and add line numbers.  Write result to output file\nprint * ! skip a line on screen\nwrite (*, '(a)') \"Processing input file and writing output file....\"\nprint * ! skip a line on screen\ni = 1\ndo\n    ! read line from input file\n    read (12, '(a)', iostat = rdst) line\n\n    ! if end of file, exit loop\n    if (rdst > 0) stop \"read error\"\n    if (rdst < 0) exit\n\n    write (*, '(a, a)', advance=\"no\") \"Read line from input file -> \", line\n\n    ! write line number and line to output file\n    write (14, '(i10, 2x, a)') i, line\n    print * ! skip line on screen\n    write (*, '(a, i10, 2x, a)', advance=\"no\") \"Wrote line to output file -> \", i, line\n    print * ! skip line on sreen\n    i = i + 1\n        \nend do\n\nprint * ! skip line on screen\n\n! close files\n\nclose (12)\nclose (14)\n\nend program linenumbers\n\n","lang":"fortran","filename":"section_12_8_line_numbers.f90","key":"QMn3jxNsH4"}],"key":"xa1nn39axl"}],"key":"GoUzsAXkG3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The following explanation is given by “Code Copilot” within ChatGPT 4.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A8lPdsuzmw"}],"key":"IMrAkIKy3T"}],"key":"wOv2BCsIRt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Fortran program you’re inquiring about seems to involve reading data from an input file, manipulating or processing this data in some way, and then writing the output to another file, formatting it with line numbers. Based on the content of the input and output files, here’s a likely explanation:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K8txtuVUdx"}],"key":"qCKww8ZE2z"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Program Description","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VXpmOIUK25"}],"identifier":"program-description","label":"Program Description","html_id":"program-description","implicit":true,"key":"fjQw1GRPrb"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Input Handling","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zvNuC83jm7"}],"key":"IUh4Q4LC4j"},{"type":"text","value":": The program reads lines from an input file named ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ifgfQNasKc"},{"type":"inlineCode","value":"input_test_file.txt","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KdqoyZHcqh"},{"type":"text","value":", which contains the following text:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"f14ActxJ0Y"}],"key":"p2dJBAcIva"},{"type":"code","lang":"","value":"this is a test 1\nthis is another test line 345\none more line if you please","position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"key":"MqGHiX4FQU"}],"key":"Wu0HdjcThn"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Processing","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"x92eLNcZpC"}],"key":"BVZG9MbvSj"},{"type":"text","value":": The main functionality of the program likely involves:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"dbokyj9pmP"}],"key":"yfler0BfoR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reading each line from the input file.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"h2Ps6XW8wy"}],"key":"NyngqBa1wJ"}],"key":"CqDEDrirum"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keeping track of the line numbers as it reads each line.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"AHPjgO8lqv"}],"key":"mW5YufhiFx"}],"key":"KrLrKnXLBU"}],"key":"r9LCAfytE0"}],"key":"TRs4sS97Mt"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Output Handling","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"vTOXOakFGe"}],"key":"JnZcscagaz"},{"type":"text","value":": The output of the program is written to another file named ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"qpQ2gneTuZ"},{"type":"inlineCode","value":"output_test_file.txt","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"cf4GbbAc2V"},{"type":"text","value":". Each line of the input file is prefixed with its line number in a formatted manner, shown as follows:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"f4fwpl9x9E"}],"key":"ChrS9by10i"},{"type":"code","lang":"","value":"      1  this is a test 1\n      2  this is another test line 345\n      3  one more line if you please","position":{"start":{"line":17,"column":1},"end":{"line":21,"column":1}},"key":"a9XbKODyqZ"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"The line numbers are formatted to be right-aligned, possibly using formatted output capabilities in Fortran, which allows specifying field widths and alignments.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"tq6ckCNtnh"}],"key":"kbodQE87Ii"}],"key":"M8mr5IAcrp"}],"key":"zg0NMZSkxF"},{"type":"heading","depth":3,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Likely Code Structure","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"T3q5iA2VWY"}],"identifier":"likely-code-structure","label":"Likely Code Structure","html_id":"likely-code-structure","implicit":true,"key":"pOh7e8fKux"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"The program might include:","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"wbtWAUtaRX"}],"key":"pCRyzqHvFp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Opening and reading from the input file.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"WZeIsZwNGe"}],"key":"o6JNvDzICB"}],"key":"ITMli8JHO1"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Looping through each line, incrementing a line counter.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"HHK97xrL1u"}],"key":"uCzGsDSsOF"}],"key":"W5yPOFGmQO"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Writing each line to the output file with the line number formatted to be right-aligned.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"jO8ukeqsGh"}],"key":"Uv6yph8AwR"}],"key":"boTL1qo86l"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Closing both the input and output files after processing is complete.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"ND15a9eJqa"}],"key":"sq5wab2QSD"}],"key":"uRblJmoh5I"}],"key":"jhZQHYdyOx"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"This approach is commonly used in programs that need to display or log data with line numbers for easier tracking and referencing, particularly useful in contexts like debugging or data reviewing. If you need the actual Fortran code or further explanation on how it could be implemented, please let me know!","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"s0bczABCct"}],"key":"onMFrJZE6t"}],"key":"mr8h6NzpH0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Program Compilation and Execution","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iK7mQaZWW5"}],"identifier":"program-compilation-and-execution","label":"Program Compilation and Execution","html_id":"program-compilation-and-execution","implicit":true,"key":"hsFU34tSbp"}],"key":"GGao2YdVT9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above program is compiled and run using Fortran Package Manager (fpm):","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J2NSgzrBS8"}],"key":"XgO2Fa1t7p"}],"key":"b29yMLUahy"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-12T00:49:47.210766Z","iopub.status.busy":"2024-05-12T00:49:47.210475Z","iopub.status.idle":"2024-05-12T00:49:47.276889Z","shell.execute_reply":"2024-05-12T00:49:47.259265Z","shell.execute_reply.started":"2024-05-12T00:49:47.210745Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import os\nroot_dir = os.getcwd()","key":"m9amuweVxj"},{"type":"outputs","id":"TiFn0dwpIv82a91G5dCYL","children":[],"key":"PioXdad15a"}],"key":"GkyffEIV5z"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-12T00:49:48.002722Z","iopub.status.busy":"2024-05-12T00:49:48.002348Z","iopub.status.idle":"2024-05-12T00:49:48.007607Z","shell.execute_reply":"2024-05-12T00:49:48.007231Z","shell.execute_reply.started":"2024-05-12T00:49:48.002701Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"code_dir = root_dir + \"/\" + \"Fortran_Code/Section_12_8_Line_Numbers\"","key":"cjXPChcOYu"},{"type":"outputs","id":"udxMwLzVrD3Sdt5psTJdk","children":[],"key":"plZApV48QC"}],"key":"SwI8BjGvag"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-12T00:49:48.475038Z","iopub.status.busy":"2024-05-12T00:49:48.474735Z","iopub.status.idle":"2024-05-12T00:49:48.480921Z","shell.execute_reply":"2024-05-12T00:49:48.480340Z","shell.execute_reply.started":"2024-05-12T00:49:48.475016Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"os.chdir(code_dir)","key":"qVwYWcn6D0"},{"type":"outputs","id":"GQfVIv2m0N90j35VzT5sH","children":[],"key":"QctloXqKdW"}],"key":"Kr5OxuIjkz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-12T00:49:48.949506Z","iopub.status.busy":"2024-05-12T00:49:48.949176Z","iopub.status.idle":"2024-05-12T00:49:48.996304Z","shell.execute_reply":"2024-05-12T00:49:48.995841Z","shell.execute_reply.started":"2024-05-12T00:49:48.949483Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"build_status = os.system(\"fpm build 2>/dev/null\")","key":"kRLlXrl899"},{"type":"outputs","id":"jwkfBqZjPrUofGSDguGBP","children":[],"key":"MWCXRDPCsx"}],"key":"Ec0RtDMiKk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-12T00:49:50.137015Z","iopub.status.busy":"2024-05-12T00:49:50.136027Z","iopub.status.idle":"2024-05-12T00:49:50.227281Z","shell.execute_reply":"2024-05-12T00:49:50.226390Z","shell.execute_reply.started":"2024-05-12T00:49:50.136346Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"exec_status = os.system(\"fpm run 2>/dev/null\")","key":"xvOIOtXNbZ"},{"type":"outputs","id":"ICcVFO3J1o6Lj8qd9Js-B","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"\nLine Number Example Program\n\nOpened input file for reading -> input_test_file.txt           \n\nOpened output file for writing -> output_test_file.txt          \n\nProcessing input file and writing output file....\n\nRead line from input file -> this is a test 1                                                                                                                    \nWrote line to output file ->          1  this is a test 1                                                                                                                    \nRead line from input file -> this is another test line 345                                                                                                       \nWrote line to output file ->          2  this is another test line 345                                                                                                       \nRead line from input file -> one more line if you please                                                                                                         \nWrote line to output file ->          3  one more line if you please                                                                                                         \n\n"},"children":[],"key":"XEC8osvEol"}],"key":"qnXwN17Pli"}],"key":"hcVfjfQ0cw"}],"key":"nYqEqvJsZ3"},"references":{"cite":{"order":[],"data":{}}}}