{"version":3,"kind":"Article","sha256":"d30dcafca5278175521c36a8acab117849b8e552148d7cacda6fefa96db7e58d","slug":"sections.electronics.power-electronics.hacking-the-tl494-ltspice-model.hacking-the-tl494-ltspice-model","location":"/Sections/Electronics/Power_Electronics/Hacking_the_TL494_LTSpice_Model/hacking_the_TL494_LTSpice_model.md","dependencies":[],"frontmatter":{"title":"Electronics - Hacking the TL494 LTSpice Model","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Mark Khusid","given":"Mark","family":"Khusid"},"name":"Mark Khusid","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/markkhusid/MKDynamics_Website_V2","numbering":{"title":{"offset":4}},"source_url":"https://github.com/markkhusid/MKDynamics_Website_V2/blob/master/Sections/Electronics/Power_Electronics/Hacking_the_TL494_LTSpice_Model/hacking_the_TL494_LTSpice_model.md","edit_url":"https://github.com/markkhusid/MKDynamics_Website_V2/edit/master/Sections/Electronics/Power_Electronics/Hacking_the_TL494_LTSpice_Model/hacking_the_TL494_LTSpice_model.md","thumbnail":"/TL494_jig-c33fe9590ae1ac9bb473f28c55deceeb.jpeg","thumbnailOptimized":"/TL494_jig-c33fe9590ae1ac9bb473f28c55deceeb.webp","exports":[{"format":"md","filename":"hacking_the_TL494_LTSpice_model.md","url":"/hacking_the_TL494_LT-a470c88cc35eef26e849ec664b5be243.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Description","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R1hIBNNS7F"}],"identifier":"description","label":"Description","html_id":"description","implicit":true,"key":"uOS9H5Ufnc"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This document provides a guide on how to hack the TL494 LTSpice model for better simulation results. It includes details on the TL494 chip, LTSpice software, and a test jig circuit for simulating the TL494’s functionality. The guide also discusses issues encountered with the original LTSpice model and how to resolve them for improved performance in simulations.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rzNe9fa3Hy"}],"key":"FovlxXceej"},{"type":"heading","depth":3,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tF3EpFpk80"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"FvnrWqkXZf"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The TL494 is a PWM chip made by Texas Instruments. Its datasheet can be found here:\n","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"caaZF3pipq"},{"type":"link","url":"http://www.ti.com/product/TL494","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"http://​www​.ti​.com​/product​/TL494","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"OOaYhUDAfp"}],"urlSource":"http://www.ti.com/product/TL494","key":"It3GG4v1sk"}],"key":"EU5KCIJmrp"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"An important part of the design process is the ability to simulate circuits. LTSpice is an excellent SPICE simulator program provided by Linear Technology Corporation.\nIt can be downloaded here:\n","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Y6aPFJSUP0"},{"type":"link","url":"http://www.linear.com/designtools/software/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"http://​www​.linear​.com​/designtools​/software/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"TVDoH7Sla1"}],"urlSource":"http://www.linear.com/designtools/software/","key":"V12X7T84R4"}],"key":"t0Ib7rH3y8"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Unfortunately, an official LTSpice model for the TL494 chip does ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"wFJTyvVbOO"},{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"not","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Ga9MMndCCo"}],"key":"WnuqLpvpca"},{"type":"text","value":" exist, to my knowledge. I was able to find an unofficial LTSpice model that works fairly well here:\n","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"uH3DKCbils"},{"type":"link","url":"http://www.mikrocontroller.net/topic/206248","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"http://​www​.mikrocontroller​.net​/topic​/206248","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ANtk6xVLBa"}],"urlSource":"http://www.mikrocontroller.net/topic/206248","key":"pqUz3HxTZo"}],"key":"bKgrk5RrEZ"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"The LTSpice files for the TL494 can be downloaded from my server here:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"VYHPwXS3Ax"}],"key":"h3uAnWQHen"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":21,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"/TL494-f5095c6042be331509ca39bd74704ca6.asy","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"TL494.asy","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"EuLZjqOg8J"}],"urlSource":"TL494_LTSpice_files/TL494.asy","static":true,"protocol":"file","key":"ctWBo9C9WD"}],"key":"p8qibP2vxt"}],"key":"LdqmORMZym"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"/TL494-ab5ec9e2d2cdab63a4bb1a290aaf3733.sub","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"TL494.sub","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"arjzTEjsgT"}],"urlSource":"TL494_LTSpice_files/TL494.sub","static":true,"protocol":"file","key":"TiTmEo6wW9"}],"key":"LpixPnAW5D"}],"key":"SkWg1PXfUs"}],"key":"gtcTNQ3c43"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Place the ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"iiflaH4b1W"},{"type":"inlineCode","value":"TL494.asy","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"lLFfmbv7BS"},{"type":"text","value":" file into ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"EprgCeutLW"},{"type":"inlineCode","value":"/LTSpiceIV/lib/sym/Misc","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"tJKc02195z"},{"type":"text","value":" and the ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"guwjLQlUO2"},{"type":"inlineCode","value":"TL494.sub","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"hZoNiRUyUS"},{"type":"text","value":" file into ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"VZzaaORxhC"},{"type":"inlineCode","value":"/LTSpiceIV/lib/sub/eigene","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"MVtztn2R3v"},{"type":"text","value":".\nThe second directory ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"mJB4fBGUwI"},{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"must","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"yZrC0RztDh"}],"key":"tCeGfGYb6i"},{"type":"text","value":" be this way or it will not work.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"zvDGtZedo5"}],"key":"fDA2eU53uZ"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"In the next section we will simulate with this model, discover its limitations, and discuss techniques for overcoming these limitations.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"bxWkKQDd0o"}],"key":"FahkNsz6We"},{"type":"heading","depth":3,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Test Jig Simulation Circuit","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"mYoYNHc4LY"}],"identifier":"test-jig-simulation-circuit","label":"Test Jig Simulation Circuit","html_id":"test-jig-simulation-circuit","implicit":true,"key":"vhOSJnjuE2"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"There is a test jig available from the same source as the unofficial LTSpice model, but it didn’t simulate properly “out of the box.”\nThe following test jig that I made should simulate with no issues.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"KFd6zDcQmA"}],"key":"wgtl7mqVPa"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Notice that the voltage source supplying Vcc is ramped up, rather than being a DC source. This allows the simulation engine to run without errors.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"JUusDseg7H"}],"key":"RR1iCq0WBF"},{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"The error amplifiers (EA’s) are wired into max PWM configurations at the inputs, with a SIN wave source manipulating the feedback (FB) pin.\nThe sine wave swings from a 2V offset between 3.5V and 0.5V, providing a full range of PWM duty cycle.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"Jl3iBYx8Dc"}],"key":"SIahNRkOgf"},{"type":"image","url":"/TL494_jig-c33fe9590ae1ac9bb473f28c55deceeb.jpeg","alt":"TL494 Test Jig","height":"600","width":"800","align":"center","key":"msinaokCQu","urlSource":"images/TL494_jig.jpeg","urlOptimized":"/TL494_jig-c33fe9590ae1ac9bb473f28c55deceeb.webp"},{"type":"heading","depth":3,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Test Jig Simulation Run","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"LSXKTr76tt"}],"identifier":"test-jig-simulation-run","label":"Test Jig Simulation Run","html_id":"test-jig-simulation-run","implicit":true,"key":"pq77OcAM8n"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"After running the simulation of the test jig circuit, you get the following output.\nI placed voltage and current markers at nodes of significance, such as the PWM output and sense resistor current.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"FtxHKLZeyl"}],"key":"AlNvrCeiBH"},{"type":"image","url":"/TL494_test_jig_sim_r-6445525b073992dd506612144ad4c876.jpeg","alt":"TL494 Test Jig Simulation Run","height":"600","width":"800","align":"center","key":"QGLGAo6qdk","urlSource":"images/TL494_test_jig_sim_run.jpeg","urlOptimized":"/TL494_test_jig_sim_r-6445525b073992dd506612144ad4c876.webp"},{"type":"heading","depth":3,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"TL494 LTSpice Model Text and Issues Discussion","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"Le0oYdidOG"}],"identifier":"tl494-ltspice-model-text-and-issues-discussion","label":"TL494 LTSpice Model Text and Issues Discussion","html_id":"tl494-ltspice-model-text-and-issues-discussion","implicit":true,"key":"EH8zu8UliU"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"When I first used the TL494 LTSpice model, I noticed that the voltage at the PWM outputs went only up to 4.8V, despite having 13V at the VCC pin.","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"cvV6MuemLV"}],"key":"S56vCOk4W9"},{"type":"paragraph","position":{"start":{"line":60,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"This didn’t make sense since the saturation voltage of the internal transistors was only 2.5V maximum according to the datasheet.\nSo I would expect at least a 10.5V PWM output. 4.8V is fine for logic-level MOSFETs, but not enough to fully enhance standard MOSFETs.","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"uqbI50062I"}],"key":"SLU5BAq23m"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"The model therefore had to be tweaked. Below is the original model text from the ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"RlhVjOEmkT"},{"type":"inlineCode","value":"TL494.sub","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"Xcvweo5xn8"},{"type":"text","value":" file:","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"k6R8gDsM61"}],"key":"XuyWMLBWb2"},{"type":"code","lang":"","value":"* TL494.asc\n*              1    2   3   4  5  6   7  8  9  10 11 12  13  14  15   16\n.subckt tl494 1IN+ 1IN- FB DTC CT RT GND C1 E1 E2 C2 VCC OC REF 2IN- 2IN+\nXEA1 1IN+ 1IN- VCC 0 N015 level.2 Avol=1e5 GBW=1Meg Slew=10k ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=1Meg\nXEA2 2IN+ 2IN- VCC 0 N016 level.2 Avol=1e5 GBW=1Meg Slew=10k ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=1Meg\nVDT N007 DTC 0.12\nV2 N014 CT 0.7\nA1 0 N005 0 N011 0 0 N009 0 OR vhigh=4.8 td=50n\nA2 0 N006 0 N009 0 N002 0 0 OR vhigh=4.8 td=50n\nA3 0 N010 0 N009 0 N012 0 0 OR vhigh=4.8 td=50n\nA4 0 OC` 0 N008 0 0 N006 0 AND vhigh=4.8 td=50n\nA5 0 N004 0 OC` 0 0 N010 0 AND vhigh=4.8 td=50n\nE1 OC` 0 OC 0 1\nA6 N004 0 N009 N001 0 N004 N008 0 DFLOP vhigh=4.8 vlow=0.2 td=50n\nI2 FB 0 0.7m\nR1 N003 N002 470\nR2 N013 N012 470\nR4 N003 E1 2k7\nR5 N013 E2 2k7\nQ3 RT RT Ref 0 PNP\nQ4 CT RT Ref 0 PNP\nS1 0 CT ctl 0 SW off\nA10 CT 0 0 0 0 0 ctl 0 SCHMITT vhigh=1 vlow=-1 vt=1.5 vh=1.495 td=10n tripdt=1n\nR3 VCC Ref 270\nR6 N001 0 470\nC1 N001 VCC 1n\nXU1 N007 CT VCC 0 N005 level.2 Avol=1G GBW=1G Slew=1G ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg\nXU2 FB N014 VCC 0 N011 level.2 Avol=1G GBW=1G Slew=1G ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg\nQ1 C1 N003 E1 0 NPN\nQ2 C2 N013 E2 0 NPN\nD3 0 Ref DZ\nD1 N016 FB D\nD2 N015 FB D\nD4 N001 VCC D\nD5 0 N001 D\n.model D D\n.model NPN NPN\n.model PNP PNP\n.model sw sw(ron=1)\n.lib ltc.lib\n.model dz d(vrev=5)\n.lib UniversalOpamps2.sub\n.ends tl494","position":{"start":{"line":65,"column":1},"end":{"line":109,"column":1}},"key":"RFk2QqegGM"},{"type":"paragraph","position":{"start":{"line":111,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"The bases of the BJT output transistors Q1 and Q2 connect to nodes N003 and N013 respectively, which are tied through 470Ω resistors (R1 and R2) to logic functions A2 and A3.\nThese functions have a ","position":{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},"key":"YI9dyyCj8y"},{"type":"inlineCode","value":"vhigh","position":{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},"key":"kmwA6WOqY4"},{"type":"text","value":" of 4.8V, which limits the PWM output to that voltage.","position":{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},"key":"tIOfpqtunq"}],"key":"stWa6cBZNA"},{"type":"heading","depth":3,"position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"Solution to the TL494 LTSpice Model Issue","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"DLCfJNWtSd"}],"identifier":"solution-to-the-tl494-ltspice-model-issue","label":"Solution to the TL494 LTSpice Model Issue","html_id":"solution-to-the-tl494-ltspice-model-issue","implicit":true,"key":"OUFSLHiGGl"},{"type":"paragraph","position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"text","value":"To fix the issue of the PWM output voltage being limited to 4.8V, I needed to increase the voltage at the bases of the output transistors Q1 and Q2.\nThe original model used logic gates A2 and A3 to control the bases, which limited the output voltage to 4.8V.","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"G0JADXYPcM"}],"key":"ZRR2ydMMo3"},{"type":"paragraph","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"Initially, I tried increasing ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"CAWWWBvfJ7"},{"type":"inlineCode","value":"vhigh","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"qjqjlzoiw1"},{"type":"text","value":" of A2 and A3 from 4.8V to 13V, but it ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"jBTM2cbbsK"},{"type":"strong","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"did not work","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"tXALkkQuy0"}],"key":"G8VsfbCXMC"},{"type":"text","value":".","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"KlDRMGTqNA"}],"key":"z9CwRB5cUA"},{"type":"paragraph","position":{"start":{"line":121,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Instead, I inserted 100Ω resistors and E elements with gain 2.1875 V/V between the logic gates and the transistor bases.\nThis yielded 4.8V × 2.1875 = ","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"iZd6ytLn5L"},{"type":"strong","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"10.5V","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"FcLP8EqJit"}],"key":"Nr8PMRhPe9"},{"type":"text","value":", suitable for standard MOSFETs.","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"wLP424jvtI"}],"key":"ei5YTXtMnC"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"cwix2vz2OU"}],"key":"sSEwtkLP5F"},{"type":"paragraph","children":[{"type":"text","value":"The output voltage is fixed at 10.5V and does ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"hFij6iBmra"},{"type":"strong","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"not","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"iXt5U9omjL"}],"key":"f9Iq0BiE1p"},{"type":"text","value":" simulate current-dependent saturation voltage. This is a limitation of the model.","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"oZYtQmTHaZ"}],"key":"Gu2kzIM5Wv"}],"key":"Waho2kCzpU"},{"type":"paragraph","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"The 100 ohm resistors were required by the simulation engine to isolate the logic elements A2 and A3 from the E elements E1000 and E1001.","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"o36d8YNVfZ"}],"key":"avgmCE93qk"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"strong","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"Repaired model:","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"jS9BGTmYKJ"}],"key":"YUhVf505bV"}],"key":"pjOvxgd6VB"},{"type":"code","lang":"","value":"* TL494.asc\n*              1    2   3   4  5  6   7  8  9  10 11 12  13  14  15   16\n.subckt tl494 1IN+ 1IN- FB DTC CT RT GND C1 E1 E2 C2 VCC OC REF 2IN- 2IN+\nXEA1 1IN+ 1IN- VCC 0 N015 level.2 Avol=1e5 GBW=1Meg Slew=10k ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=1Meg\nXEA2 2IN+ 2IN- VCC 0 N016 level.2 Avol=1e5 GBW=1Meg Slew=10k ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=1Meg\nVDT N007 DTC 0.12\nV2 N014 CT 0.7\nA1 0 N005 0 N011 0 0 N009 0 OR vhigh=4.8 td=50n\nA2 0 N006 0 N009 0 N002 0 0 OR vhigh=4.8 td=50n\nA3 0 N010 0 N009 0 N012 0 0 OR vhigh=4.8 td=50n\nA4 0 OC` 0 N008 0 0 N006 0 AND vhigh=4.8 td=50n\nA5 0 N004 0 OC` 0 0 N010 0 AND vhigh=4.8 td=50n\nE1 OC` 0 OC 0 1\nA6 N004 0 N009 N001 0 N004 N008 0 DFLOP vhigh=4.8 vlow=0.2 td=50n\nI2 FB 0 0.7m\nR1 N003 N002 470\nR2 N013 N012 470\nR4 N003 E1 2k7\nR5 N013 E2 2k7\nQ3 RT RT Ref 0 PNP\nQ4 CT RT Ref 0 PNP\nS1 0 CT ctl 0 SW off\nA10 CT 0 0 0 0 0 ctl 0 SCHMITT vhigh=1 vlow=-1 vt=1.5 vh=1.495 td=10n tripdt=1n\nR3 VCC Ref 270\nR6 N001 0 470\nC1 N001 VCC 1n\nXU1 N007 CT VCC 0 N005 level.2 Avol=1G GBW=1G Slew=1G ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg\nXU2 FB N014 VCC 0 N011 level.2 Avol=1G GBW=1G Slew=1G ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg\nQ1 C1 N1010 E1 0 NPN\nQ2 C2 N1011 E2 0 NPN\nE1000 N1000 0 N003 0 2.1875\nE1001 N1001 0 N013 0 2.1875\nR1000 N1000 N1010 100\nR1001 N1001 N1011 100\nD3 0 Ref DZ\nD1 N016 FB D\nD2 N015 FB D\nD4 N001 VCC D\nD5 0 N001 D\n.model D D\n.model NPN NPN\n.model PNP PNP\n.model sw sw(ron=1)\n.lib ltc.lib\n.model dz d(vrev=5)\n.lib UniversalOpamps2.sub\n.ends tl494","position":{"start":{"line":131,"column":1},"end":{"line":179,"column":1}},"key":"HlD1mbJjGT"},{"type":"paragraph","position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"text","value":"Download the repaired model here:\n","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"HQ1Z3JYD84"},{"type":"link","url":"/TL494_repaired-839f3823d973a043aa9f63bd2bad1d1b.sub","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"children":[{"type":"text","value":"TL494_repaired.sub","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"ttrZP3zziS"}],"urlSource":"TL494_LTSpice_files/TL494_repaired.sub","static":true,"protocol":"file","key":"u49aSVfQUH"}],"key":"LWH4uuDP9W"},{"type":"heading","depth":3,"position":{"start":{"line":184,"column":1},"end":{"line":184,"column":1}},"children":[{"type":"text","value":"Conclusion","position":{"start":{"line":184,"column":1},"end":{"line":184,"column":1}},"key":"oe1tNCeYPo"}],"identifier":"conclusion","label":"Conclusion","html_id":"conclusion","implicit":true,"key":"Au7Y2tscp4"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"text","value":"In this guide, we explored how to hack the TL494 LTSpice model to achieve better simulation results. By understanding the limitations of the original model and making necessary adjustments, we were able to simulate the TL494’s functionality more accurately.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"OVRspeioot"}],"key":"fef9eX4o3x"}],"key":"zDcHiOr1JV"}],"key":"dmUVIEmCKH"},"references":{"cite":{"order":[],"data":{}}}}