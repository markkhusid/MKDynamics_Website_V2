{"version":3,"kind":"Notebook","sha256":"b412ffa3bf4455f92a30df209631e18cd80e5fea260fbfdb96dc6b45dae750ed","slug":"sections.computer-programming.fortran.fortran-mooc.section-arrays-normalize","location":"/Sections/Computer_Programming/Fortran/Fortran_MOOC/Section_Arrays_Normalize.ipynb","dependencies":[],"frontmatter":{"title":"Section Arrays: Normalize","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Mark Khusid","given":"Mark","family":"Khusid"},"name":"Mark Khusid","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/markkhusid/MKDynamics_Website_V2","numbering":{"title":{"offset":5}},"source_url":"https://github.com/markkhusid/MKDynamics_Website_V2/blob/master/Sections/Computer_Programming/Fortran/Fortran_MOOC/Section_Arrays_Normalize.ipynb","edit_url":"https://github.com/markkhusid/MKDynamics_Website_V2/edit/master/Sections/Computer_Programming/Fortran/Fortran_MOOC/Section_Arrays_Normalize.ipynb","exports":[{"format":"ipynb","filename":"Section_Arrays_Normalize.ipynb","url":"/build/Section_Arrays_Norma-a9d80de9d476487ade11bf8c9c174e70.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"---\njupytext:\n  formats: md:myst\n  text_representation:\n    extension: .md\n    format_name: myst\nkernelspec:\n  display_name: Python 3\n  language: python\n  name: python3\n---","key":"EOOz6YkFC8"}],"key":"UhwhRNZAZB"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Section Arrays: Normalize","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mUGg9lNiRi"}],"identifier":"section-arrays-normalize","label":"Section Arrays: Normalize","html_id":"section-arrays-normalize","implicit":true,"key":"RkmYDAoMms"}],"visibility":"show","key":"SRN8U98c3J"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Adapted from: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dGzbYThgCz"},{"type":"link","url":"https://github.com/gjbex/Fortran-MOOC/tree/master/source_code/arrays","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/gjbex​/Fortran​-MOOC​/tree​/master​/source​_code​/arrays","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SzJ1wKfBFT"}],"urlSource":"https://github.com/gjbex/Fortran-MOOC/tree/master/source_code/arrays","error":true,"key":"BC9mpeO114"}],"key":"D1KBelwrD5"}],"key":"Np7085J8gh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This program normalizes a randomly generated matrix in Fortran.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CgGDtXjh2J"}],"identifier":"this-program-normalizes-a-randomly-generated-matrix-in-fortran","label":"This program normalizes a randomly generated matrix in Fortran.","html_id":"this-program-normalizes-a-randomly-generated-matrix-in-fortran","implicit":true,"key":"Z8vgatvKhp"}],"key":"nDT9hlimzN"},{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"fortran","value":"program normalize\n  use, intrinsic :: iso_fortran_env, only : error_unit, DP => REAL64\n  implicit none\n  integer, parameter :: rows = 3, cols = 4\n  real(kind=DP), dimension(rows, cols) :: matrix, spread_norm\n  real(kind=DP), dimension(rows) :: norm\n\n  call random_number(matrix)\n  print '(A)', 'original:'\n  call print_matrix(matrix)\n\n  norm = sum(matrix, dim=2)\n  print '(A, *(F12.7))', 'norm:', norm\n\n  spread_norm = spread(norm, 2, size(matrix, 2))\n  call print_matrix(spread_norm)\n\n  matrix = matrix/spread_norm\n  print '(A)', 'row-normalized::'\n  call print_matrix(matrix)\n\n  norm = sum(matrix, dim=2)\n  print '(A, *(F12.7))', 'norm:', norm\n\ncontains\n\n  subroutine print_matrix(matrix)\n      implicit none\n      real(kind=DP), dimension(:, :), intent(in) :: matrix\n      integer :: row\n\n      do row = 1, size(matrix, 1)\n          print '(*(F12.7))', matrix(row, :)\n      end do\n  end subroutine print_matrix\n\nend program normalize","position":{"start":{"line":1,"column":1},"end":{"line":39,"column":1}},"key":"w7tqbNMvAq"}],"key":"IeqMBFTu6N"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above program is compiled and run using Fortran Package Manager (fpm):","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XP6r43IOVZ"}],"key":"yFVt1ZKIZW"}],"key":"FIMLqCH6QS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Build the Program using FPM (Fortran Package Manager)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UNJYi6OA1Q"}],"identifier":"build-the-program-using-fpm-fortran-package-manager","label":"Build the Program using FPM (Fortran Package Manager)","html_id":"build-the-program-using-fpm-fortran-package-manager","implicit":true,"key":"xfx5KL6S2c"}],"key":"ixOCmMQW8h"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nroot_dir = os.getcwd()","key":"prqkCG0v8k"},{"type":"outputs","id":"gH7hkjuQrl0Uk22FgupbS","children":[],"key":"UYiBm4DroK"}],"key":"lBbLJqmyxx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"code_dir = root_dir + \"/\" + \"Fortran_Code/Section_Arrays_Normalize\"","key":"GjPwadwLWn"},{"type":"outputs","id":"caXpEUw_4zk9EDUsyqMs5","children":[],"key":"NopGXlFVbi"}],"key":"JqqSAQvgEN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"os.chdir(code_dir)","key":"TPWRhkQzwR"},{"type":"outputs","id":"_2a8d_r5j1NoThJuHzFn9","children":[],"key":"Qz0NZJPP7j"}],"key":"zph5Kl8FgD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"build_status = os.system(\"fpm build 2>/dev/null\")","key":"B8eh3tPqsV"},{"type":"outputs","id":"fxEx10mf6Zx-OTBx3oJdP","children":[],"key":"dnOG0smEZf"}],"key":"h2Qk7rtt38"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Run the Program using FPM (Fortran Package Manager)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k12c40BZFL"}],"identifier":"run-the-program-using-fpm-fortran-package-manager","label":"Run the Program using FPM (Fortran Package Manager)","html_id":"run-the-program-using-fpm-fortran-package-manager","implicit":true,"key":"TvsG4Vs3ro"}],"key":"nGEzztnC5Q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"exec_status = os.system(\"fpm run 2>/dev/null\")","key":"cqqVfLZG0r"},{"type":"outputs","id":"a0vDP9xDcCVXdwrG4xGur","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"original:\n   0.9819122   0.5656663   0.0519671   0.6593946\n   0.4108865   0.3895287   0.9864829   0.4993061\n   0.1143754   0.7222470   0.3168408   0.5699719\nnorm:   2.2589402   2.2862042   1.7234352\n   2.2589402   2.2589402   2.2589402   2.2589402\n   2.2862042   2.2862042   2.2862042   2.2862042\n   1.7234352   1.7234352   1.7234352   1.7234352\nrow-normalized::\n   0.4346783   0.2504122   0.0230051   0.2919044\n   0.1797243   0.1703823   0.4314938   0.2183996\n   0.0663648   0.4190741   0.1838426   0.3307185\nnorm:   1.0000000   1.0000000   1.0000000\n"},"children":[],"key":"x3uM07uB4n"}],"key":"PsVBidEFNf"}],"key":"fNomfCMfG1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"exec_status = os.system(\"fpm run 2>/dev/null\")","key":"DswALvOGHG"},{"type":"outputs","id":"d-z6PAnt8qdWqy7EQ1SCD","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"original:\n   0.9050181   0.2726466   0.6853125   0.2627178\n   0.5990356   0.6849099   0.2024486   0.6401817\n   0.4520195   0.7993657   0.2001478   0.3209484\nnorm:   2.1256949   2.1265758   1.7724815\n   2.1256949   2.1256949   2.1256949   2.1256949\n   2.1265758   2.1265758   2.1265758   2.1265758\n   1.7724815   1.7724815   1.7724815   1.7724815\nrow-normalized::\n   0.4257516   0.1282623   0.3223946   0.1235915\n   0.2816902   0.3220717   0.0951993   0.3010388\n   0.2550207   0.4509868   0.1129195   0.1810729\nnorm:   1.0000000   1.0000000   1.0000000\n"},"children":[],"key":"IxIVvw7LWB"}],"key":"BXzF7F5lKV"}],"key":"Bvm2NAcB82"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"exec_status = os.system(\"fpm run 2>/dev/null\")","key":"KDgQd25Se1"},{"type":"outputs","id":"NITqSX-dvFSDYkPrXIqS-","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"original:\n   0.5397559   0.6360928   0.7468544   0.9909061\n   0.2020675   0.2961180   0.5907776   0.1273281\n   0.7599353   0.6659968   0.0851879   0.3199028\nnorm:   2.9136092   1.2162912   1.8310228\n   2.9136092   2.9136092   2.9136092   2.9136092\n   1.2162912   1.2162912   1.2162912   1.2162912\n   1.8310228   1.8310228   1.8310228   1.8310228\nrow-normalized::\n   0.1852534   0.2183178   0.2563331   0.3400957\n   0.1661342   0.2434598   0.4857205   0.1046855\n   0.4150332   0.3637294   0.0465247   0.1747126\nnorm:   1.0000000   1.0000000   1.0000000\n"},"children":[],"key":"OwUIxnDEXJ"}],"key":"eGOxJacxQq"}],"key":"jAUv4eYXUp"}],"key":"LrFeMNjqTx"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Section Arrays: Max Array","url":"/sections/computer-programming/fortran/fortran-mooc/section-arrays-max-array","group":"Computer Programming"},"next":{"title":"Section Arrays: Normalize Performance","url":"/sections/computer-programming/fortran/fortran-mooc/section-arrays-normalize-performance","group":"Computer Programming"}}},"domain":"http://localhost:3007"}