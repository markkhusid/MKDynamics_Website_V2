{"version":3,"kind":"Notebook","sha256":"18047e0bfc3cdf958cf86488b2d16731ac6b3777f76d2da524fa5f10c2ed1cd6","slug":"sections.computer-programming.fortran.modern-fortran.analyzing-time-series-data-with-arrays","location":"/Sections/Computer_Programming/Fortran/Modern_Fortran/Analyzing_Time_Series_Data_with_Arrays.ipynb","dependencies":[],"frontmatter":{"title":"Analyzing Time Series Data with Arrays","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Mark Khusid","given":"Mark","family":"Khusid"},"name":"Mark Khusid","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/markkhusid/MKDynamics_Website_V2","numbering":{"title":{"offset":4}},"source_url":"https://github.com/markkhusid/MKDynamics_Website_V2/blob/master/Sections/Computer_Programming/Fortran/Modern_Fortran/Analyzing_Time_Series_Data_with_Arrays.ipynb","edit_url":"https://github.com/markkhusid/MKDynamics_Website_V2/edit/master/Sections/Computer_Programming/Fortran/Modern_Fortran/Analyzing_Time_Series_Data_with_Arrays.ipynb","exports":[{"format":"ipynb","filename":"Analyzing_Time_Series_Data_with_Arrays.ipynb","url":"/build/Analyzing_Time_Serie-adbecc16a65ee1751ecc54b63ed7e477.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"---\njupytext:\n  formats: md:myst\n  text_representation:\n    extension: .md\n    format_name: myst\nkernelspec:\n  display_name: Python 3\n  language: python\n  name: python3\n---","key":"lU5WWq9Tbr"}],"key":"d40BiPbRdt"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Analyzing Time Series Data with Arrays","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bhQtkZ9Ud6"}],"identifier":"analyzing-time-series-data-with-arrays","label":"Analyzing Time Series Data with Arrays","html_id":"analyzing-time-series-data-with-arrays","implicit":true,"key":"n6mffcMPeC"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following program analyzes time series data using arrays. ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mZpDHYYsdO"},{"type":"break","key":"DIoLRYahm3"},{"type":"text","value":"\nAdapted from: “Modern Fortan” by Milan Curcic (Manning)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vUex1ixfTR"}],"key":"ioB6n7lgpg"}],"key":"A7zqj0YRgx"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Program to Calculate the Gain of a Stock Price","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dHjcpCgE08"}],"identifier":"program-to-calculate-the-gain-of-a-stock-price","label":"Program to Calculate the Gain of a Stock Price","html_id":"program-to-calculate-the-gain-of-a-stock-price","implicit":true,"key":"jX8XWDe3h5"}],"visibility":"show","key":"U3Sea4HcHi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In file ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BnzNRqCuZG"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"stock_gain.f90","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sJAYXE8aa8"}],"key":"KB0WO1w6mr"}],"identifier":"in-file-stock-gain-f90","label":"In file stock_gain.f90","html_id":"in-file-stock-gain-f90","implicit":true,"key":"TQ0henhhO7"}],"key":"CxZTAUw94K"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Fortran_Code/Analyzing_Time_Series_Data_with_Arrays/app/stock_gain.f90","literal":true,"children":[{"type":"code","value":"program stock_gain\n\n  use mod_arrays, only: reverse\n  use mod_io, only: read_stock\n\n  implicit none\n\n  character(len=4), allocatable ::  symbols(:)\n  character(len=:), allocatable ::  time(:)\n  real, allocatable             ::  open(:), high(:), low(:), &\n                                    close(:), adjclose(:), volume(:)\n                                    \n  integer                       :: n                                    \n  real                          :: gain\n\n  symbols = ['AAPL', 'AMZN', 'CRAY', 'CSCO', 'HPQ ', &\n             'IBM ', 'INTC', 'MSFT', 'NVDA', 'ORCL']\n             \n  do n = 1, size(symbols)\n\n    call read_stock( &\n      'data/' // trim(symbols(n)) // '.csv', &\n      time, open, high, low, close, adjclose, volume)\n    \n      adjclose = reverse(adjclose)\n      gain = (adjclose(size(adjclose)) - adjclose(1))\n      \n      if (n == 1) then\n        print *, &\n          time(size(time)) // ' through ' // time(1)\n        \n        print *, 'Symbol, Gain (USD), Relative Gain (%)'\n        print *, '-------------------------------------'\n      end if\n\n      print *, symbols(n), gain, &\n        nint(gain / adjclose(1) * 100)\n\n  end do\n    \nend program stock_gain\n","lang":"fortran","filename":"stock_gain.f90","key":"NLmplTx3jt"}],"key":"XVbnia88jb"}],"key":"u2q60m4KoM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In file ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OeCEoxdDdT"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"mod_arrays.f90","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E4ZrgvmqYs"}],"key":"Oi1NqAuEP5"}],"identifier":"in-file-mod-arrays-f90","label":"In file mod_arrays.f90","html_id":"in-file-mod-arrays-f90","implicit":true,"key":"hF4bzNMq9u"}],"key":"EKaHAkBagK"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Fortran_Code/Analyzing_Time_Series_Data_with_Arrays/src/mod_arrays.f90","literal":true,"children":[{"type":"code","value":"module mod_arrays\n\n  ! Utility functions that operate on arrays.\n\n  implicit none\n\n  private\n  public :: argsort, average, crossneg, crosspos, intdate, moving_average,&\n            moving_std, reverse, std\n\ncontains\n\n  pure function argsort(x) result(a)\n    ! Returns indices that sort x from low to high.\n    real, intent(in):: x(:)\n    integer :: a(size(x))\n    integer :: i, i0, tmp1\n    real :: tmp2\n    real :: xwork(size(x))\n    a = [(real(i), i = 1, size(x))]\n    xwork = x\n    do i = 1, size(x) - 1\n      i0 = minloc(xwork(i:), 1) + i - 1\n      if (i0 /= i) then\n        tmp2 = xwork(i)\n        xwork(i) = xwork(i0)\n        xwork(i0) = tmp2\n        tmp1 = a(i)\n        a(i) = a(i0)\n        a(i0) = tmp1\n      end if\n    end do\n  end function argsort\n\n  pure real function average(x)\n    ! Returns a average of x.\n    real, intent(in) :: x(:)\n    average = sum(x) / size(x)\n  end function average\n\n  pure function crossneg(x, w) result(res)\n    ! Returns indices where input array x crosses its\n    ! moving average with window w from positive to negative.\n    real, intent(in) :: x(:)\n    integer, intent(in) :: w\n    integer, allocatable :: res(:)\n    real, allocatable :: xavg(:)\n    logical, allocatable :: greater(:), smaller(:)\n    integer :: i\n    res = [(i, i = 2, size(x))]\n    xavg = moving_average(x, w)\n    greater = x > xavg\n    smaller = x < xavg\n    res = pack(res, smaller(2:) .and. greater(:size(x)-1))\n  end function crossneg\n\n  pure function crosspos(x, w) result(res)\n    ! Returns indices where input array x crosses its\n    ! moving average with window w from negative to positive.\n    real, intent(in) :: x(:)\n    integer, intent(in) :: w\n    integer, allocatable :: res(:)\n    real, allocatable :: xavg(:)\n    logical, allocatable :: greater(:), smaller(:)\n    integer :: i\n    res = [(i, i = 2, size(x))]\n    xavg = moving_average(x, w)\n    greater = x > xavg\n    smaller = x < xavg\n    res = pack(res, greater(2:) .and. smaller(:size(x)-1))\n  end function crosspos\n\n  pure elemental integer function intdate(t)\n    ! Converts a time stamp in format YYYY-mm-dd to integer.\n    character(len=10), intent(in) :: t\n    character(len=8) :: str\n    str = t(1:4) // t(6:7) // t(9:10)\n    read(str, *) intdate\n  end function intdate\n\n  pure function moving_average(x, w) result(res)\n    ! Returns the moving average of x with one-sided window w.\n    real, intent(in) :: x(:)\n    integer, intent(in) :: w\n    real :: res(size(x))\n    integer :: i, i1\n    do i = 1, size(x)\n      i1 = max(i-w, 1)\n      res(i) = average(x(i1:i))\n    end do \n  end function moving_average\n\n  pure function moving_std(x, w) result(res)\n    ! Returns the moving standard deviation of x with one-sided window w.\n    real, intent(in) :: x(:)\n    integer, intent(in) :: w\n    real :: res(size(x))\n    integer :: i, i1\n    do i = 1, size(x)\n      i1 = max(i-w, 1)\n      res(i) = std(x(i1:i))\n    end do \n  end function moving_std\n\n  pure function reverse(x)\n    ! Reverses the order of elements of x.\n    real, intent(in) :: x(:)\n    real :: reverse(size(x))\n    reverse = x(size(x):1:-1)\n  end function reverse\n\n  pure real function std(x)\n    ! Returns the standard deviation of x.\n    real, intent(in) :: x(:)\n    std = sqrt(average((x - average(x))**2))\n  end function std\n\nend module mod_arrays\n","lang":"fortran","filename":"mod_arrays.f90","key":"tGP1lAx5k7"}],"key":"sYqjptG37b"}],"key":"jNwmKws4oF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In file ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRuYGhLBKo"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"mod_io.f90","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YNxfNqSZFG"}],"key":"QvhFkk5Hlz"}],"identifier":"in-file-mod-io-f90","label":"In file mod_io.f90","html_id":"in-file-mod-io-f90","implicit":true,"key":"iJGt1eIAFw"}],"key":"HzTnSn6oDu"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Fortran_Code/Analyzing_Time_Series_Data_with_Arrays/src/mod_io.f90","literal":true,"children":[{"type":"code","value":"module mod_io\n\n  ! A helper module for parsing stock price data in csv format.\n\n  use mod_alloc, only: alloc\n\n  implicit none\n\n  private\n  public :: read_stock, write_stock\n\ncontains\n\n  integer function num_records(filename)\n    ! Return the number of records (lines) of a text file.\n    character(len=*), intent(in) :: filename\n    integer :: fileunit\n    open(newunit=fileunit, file=filename)\n    num_records = 0\n    do\n      read(unit=fileunit, fmt=*, end=1)\n      num_records = num_records + 1\n    end do\n    1 continue\n    close(unit=fileunit)\n  end function num_records\n\n  subroutine read_stock(filename, time, open, high, low, close, adjclose, volume)\n    ! Read daily stock prices from a csv file.\n    character(len=*), intent(in) :: filename\n    character(len=:), allocatable, intent(in out) :: time(:)\n    real, allocatable, intent(in out) :: open(:), high(:), low(:),&\n                                         close(:), adjclose(:), volume(:)\n    integer :: fileunit, n, nm\n    nm = num_records(filename) - 1\n    if (allocated(time)) deallocate(time)\n    allocate(character(len=10) :: time(nm))\n    call alloc(open, nm)\n    call alloc(high, nm)\n    call alloc(low, nm)\n    call alloc(close, nm)\n    call alloc(adjclose, nm)\n    call alloc(volume, nm)\n    open(newunit=fileunit, file=filename)\n    read(fileunit, fmt=*, end=1)\n    do n = 1, nm\n      read(fileunit, fmt=*, end=1) time(n), open(n),&\n        high(n), low(n), close(n), adjclose(n), volume(n)\n    end do\n    1 close(fileunit)\n  end subroutine read_stock\n\n  subroutine write_stock(filename, time, price, mvavg, mvstd)\n    ! Write derived stock data to file.\n    character(len=*), intent(in) :: filename\n    character(len=:), allocatable, intent(in) :: time(:)\n    real, intent(in) :: price(:), mvavg(:), mvstd(:)\n    integer :: fileunit, n\n    open(newunit=fileunit, file=filename)\n    do n = 1, size(time)\n      write(fileunit, fmt=*) time(n), price(n), mvavg(n), mvstd(n)\n    end do\n    close(fileunit)\n  end subroutine write_stock \n\nend module mod_io\n","lang":"fortran","filename":"mod_io.f90","key":"OE6GqoBdk6"}],"key":"eUMCSw8GVx"}],"key":"cAvcpDatM1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Program Explanation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MI5HOVurlF"}],"identifier":"program-explanation","label":"Program Explanation","html_id":"program-explanation","implicit":true,"key":"tr4qpyzKYi"}],"key":"HK2pYI62uM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The following explanation is given by “Code Copilot” within ChatGPT 4.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XovbiKjKSH"}],"key":"Oyc5sbJM1E"}],"key":"ANvnwrZ8n8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WxuuXSwsh0"},{"type":"inlineCode","value":"stock_gain.f90","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sFz8bbH8zN"},{"type":"text","value":" Fortran program calculates the gain of various stocks between two time points using their adjusted close prices. Here’s a breakdown of the code:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xvpnAITbgC"}],"key":"tz32i7sXOI"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Modules Used","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XqG3RgyMk4"}],"identifier":"modules-used","label":"Modules Used","html_id":"modules-used","implicit":true,"key":"EANrvoQfTq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"mod_arrays","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"EIkx65EgTw"}],"key":"oISTG7Q83L"},{"type":"text","value":": Provides a ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uKWyRYKQDW"},{"type":"inlineCode","value":"reverse","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xUU9k4T9pp"},{"type":"text","value":" function used to reverse arrays.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZYYZYvsek0"}],"key":"gnVdC1Uy0Y"}],"key":"DzAOX6psWE"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"mod_io","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SIwe1ICl6B"}],"key":"DAlZIcvfxg"},{"type":"text","value":": Provides a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PEfy29JIQO"},{"type":"inlineCode","value":"read_stock","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zGeiUcv2jc"},{"type":"text","value":" function to read stock data from CSV files.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wTdXbzhiH7"}],"key":"uTRhK6YBwF"}],"key":"zcZ5PTYxLk"}],"key":"GYQGTQ7JwV"},{"type":"heading","depth":3,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Data Structures","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UQs9gSg3Rt"}],"identifier":"data-structures","label":"Data Structures","html_id":"data-structures","implicit":true,"key":"uprpWkMjpZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Arrays for stock symbols, time periods, and financial metrics (open, high, low, close, adjusted close, volume) are dynamically allocated. The actual size of these arrays is set during runtime based on the data read from the CSV files.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"bauaBnx8rQ"}],"key":"apCScSWsox"}],"key":"N7FhobqUQH"}],"key":"yMEwMLUgBd"},{"type":"heading","depth":3,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Main Process","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"A9hDPznvf7"}],"identifier":"main-process","label":"Main Process","html_id":"main-process","implicit":true,"key":"p8YoHSwAYU"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Symbol Initialization","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lxI5pJOtss"}],"key":"MjUsSc1hSh"},{"type":"text","value":": A list of stock symbols is predefined.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jUcqDPPaCI"}],"key":"O1jTvlHZn8"}],"key":"QfIL4RUaII"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Loop Through Each Symbol","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"G9xXEZCoDa"}],"key":"k3QkecapfW"},{"type":"text","value":":","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ck03lZ2cBk"}],"key":"fM6H2jPyLN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":13,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For each symbol, it reads the corresponding stock data from a CSV file named after the stock symbol.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"e2Mx8FtLqq"}],"key":"DkGTqwPYQC"}],"key":"bGKE8Fe1gv"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The adjusted close prices are reversed using the ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"zs8UQmW87R"},{"type":"inlineCode","value":"reverse","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"jLnBGBOXcR"},{"type":"text","value":" function. This might be used to adjust the time order from most recent to oldest, or vice versa.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"AprRpolwIy"}],"key":"EyA1MU6gp4"}],"key":"GwCxv2bmzp"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The gain is calculated as the difference between the final and initial adjusted close prices.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EMqWDQwStM"}],"key":"stODXHuuW6"}],"key":"AA5gjYOUzj"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For the first stock, it prints the time period covered.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"yOXVVYjSq6"}],"key":"TCwqyZxE2q"}],"key":"K4AkO3z5EZ"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"It outputs the stock symbol, the gain in USD, and the relative gain as a percentage.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"GQVXUwfMi4"}],"key":"fE8kCbuYPh"}],"key":"lAeQfQ8bmp"}],"key":"OaEjFgziae"}],"key":"RPptSOgOI0"}],"key":"RLmyP82OTV"},{"type":"heading","depth":3,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Output","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Bbzfyxde0t"}],"identifier":"output","label":"Output","html_id":"output","implicit":true,"key":"Rg5D08MpRF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The program prints a formatted output of the gains for each stock symbol over the specified period, showing both absolute and percentage changes.","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"r1dwZRJb0W"}],"key":"h6nqQ5qDT7"}],"key":"VU8aJj8oIV"}],"key":"skJfIcadO9"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"This program makes use of separate modules for array manipulations and I/O operations, which simplifies the main program and focuses on the computation of stock gains.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"odZadXo6Bb"}],"key":"wmI2f4lYXg"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"PAUFDZuJUI"},{"type":"inlineCode","value":"mod_arrays.f90","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"tWOwHWP57e"},{"type":"text","value":" file defines a module called ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"lBQgK3za4P"},{"type":"inlineCode","value":"mod_arrays","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"yx2GrCRBW1"},{"type":"text","value":", which includes a variety of functions designed to perform common array manipulations and statistical computations. Here’s a detailed breakdown of each function provided in the module:","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"ptGRl7lssf"}],"key":"Q8SDE4afnr"},{"type":"heading","depth":3,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Functions in ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"gXA1Ng26JS"},{"type":"inlineCode","value":"mod_arrays","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"R0efiXWjYX"}],"identifier":"functions-in-mod-arrays","label":"Functions in mod_arrays","html_id":"functions-in-mod-arrays","implicit":true,"key":"jdAH5jC534"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"argsort(x)","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"lFiWIaZ5VM"}],"key":"hg08RD51dm"},{"type":"text","value":": Returns indices that would sort the array ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"imtvlAXQSA"},{"type":"inlineCode","value":"x","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"XxoMQE80nj"},{"type":"text","value":" from low to high. This is useful for ordering data without changing the original array.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ooog3C9nIc"}],"key":"kRulQR7k64"}],"key":"vfoOBHr6cE"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"strong","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"average(x)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"cPg4rdyxe6"}],"key":"Y5Ac7mvlEC"},{"type":"text","value":": Calculates the average of the elements in the array ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"TZQYRt28LO"},{"type":"inlineCode","value":"x","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"KgsdpMyy5T"},{"type":"text","value":".","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"EOJFnlDmpE"}],"key":"J1pLpopfd1"}],"key":"SI9E5SDjS3"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"crossneg(x, w)","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"nja8Aug0jN"}],"key":"gr37pGFmEm"},{"type":"text","value":": Identifies indices where the array ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"AQWW4EJ3Uz"},{"type":"inlineCode","value":"x","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"oBZwZoTzjj"},{"type":"text","value":" crosses below its moving average of window size ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"yu4bgO4Bmu"},{"type":"inlineCode","value":"w","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"WhriHenCwv"},{"type":"text","value":". This function could be used to detect negative trends in time-series data.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"SPRuQqRkob"}],"key":"nSykpMpAuI"}],"key":"sQSKg56JmE"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"strong","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"crosspos(x, w)","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"A3cSzftXok"}],"key":"gyXrJ5LYAx"},{"type":"text","value":": Similar to ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"pN2O1TQKqw"},{"type":"inlineCode","value":"crossneg","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"VdZHLdjUK8"},{"type":"text","value":", but it finds indices where ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"o1aAdbkSTI"},{"type":"inlineCode","value":"x","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"xmiJbK6Eix"},{"type":"text","value":" crosses above its moving average. It’s used to identify positive trend shifts.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"x173SmD6K4"}],"key":"ikjufZCv2r"}],"key":"eMVxAOjo33"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"strong","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"intdate(t)","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"AigbvPc7EO"}],"key":"c0OG39XY12"},{"type":"text","value":": Converts a date string in the format ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"hW6lQ881Xd"},{"type":"inlineCode","value":"YYYY-mm-dd","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"JaACrIdwUk"},{"type":"text","value":" to an integer format for easier handling.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"ACuRaB2OuF"}],"key":"XfMCBv8S87"}],"key":"IQsJ0CbNXP"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"strong","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"moving_average(x, w)","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"gVZYgXWda5"}],"key":"sFraHfx85v"},{"type":"text","value":": Computes the moving average of the array ","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"krYwLzXi8W"},{"type":"inlineCode","value":"x","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"pecAvrnjLE"},{"type":"text","value":" using a one-sided window of size ","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"nocYav0eN6"},{"type":"inlineCode","value":"w","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"DI68wu5Son"},{"type":"text","value":". This function is essential for smoothing out time-series data.","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"xqArD7SnBh"}],"key":"NS4qCspKzN"}],"key":"xCdYxEhU4t"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"strong","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"moving_std(x, w)","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"oCxDPUvogn"}],"key":"deJ71dAodV"},{"type":"text","value":": Computes the moving standard deviation of the array ","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"DdIM6KZpnf"},{"type":"inlineCode","value":"x","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"GcIKR1mDls"},{"type":"text","value":", providing insights into the variability of the data over a specified window.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"qe3ojRA7dJ"}],"key":"GkHOvAoNGD"}],"key":"FEK2jmJLSY"},{"type":"listItem","spread":true,"position":{"start":{"line":42,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"strong","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"reverse(x)","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"F216FSC0x0"}],"key":"ISmZotuz3f"},{"type":"text","value":": Reverses the elements of the array ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"SIItlCkh8J"},{"type":"inlineCode","value":"x","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"QMM5TSYCwR"},{"type":"text","value":". This is used in the main program to adjust the order of adjusted close prices.","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"Sh6QUXsbMO"}],"key":"Fg9gGObiW7"}],"key":"Caf87dE0LX"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"strong","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"std(x)","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"XkIKlip43f"}],"key":"UK8J3G4ap1"},{"type":"text","value":": Calculates the standard deviation of the array ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"pp72MIhNPD"},{"type":"inlineCode","value":"x","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"WntoLBFOYn"},{"type":"text","value":", a measure of the spread or dispersion of the array elements around the mean.","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"fstDULTFVG"}],"key":"fgOyBQMqAN"}],"key":"OQ5fMWIIxw"}],"key":"FzSvsproHj"},{"type":"heading","depth":3,"position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"Usage and Visibility","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"Ls27s1FyYN"}],"identifier":"usage-and-visibility","label":"Usage and Visibility","html_id":"usage-and-visibility","implicit":true,"key":"j5VwNHI89P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":48,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"All functions are declared as ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"QlFuGzXQK7"},{"type":"inlineCode","value":"public","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"RZve9O8zuL"},{"type":"text","value":" which means they can be accessed from outside the module when it is included in other parts of the program.","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"xSLS6X0MZS"}],"key":"ZkpDP2dkR8"}],"key":"G9ovKDYnQS"},{"type":"listItem","spread":true,"position":{"start":{"line":49,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The module uses ","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"lCiRk5RUid"},{"type":"inlineCode","value":"pure","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"FYFtm9z9GQ"},{"type":"text","value":" functions, suggesting that these functions have no side effects (like modifying global variables), which is a desirable property in scientific computing for ensuring consistent and repeatable outcomes.","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"RgEhAer8v7"}],"key":"yLVIFJd3T5"}],"key":"uX1um8M8Xk"}],"key":"EScTQYsg4S"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"This module provides fundamental tools for data processing, especially useful in financial analysis or any scientific computing involving array data.","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"WZDDUfiZuF"}],"key":"xHXy0wfhAh"},{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"cpyZcpxwvv"},{"type":"inlineCode","value":"mod_io.f90","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"xOKrwjfn6S"},{"type":"text","value":" module provides functionality for input/output operations, particularly focused on reading and writing stock data. Here’s a detailed overview of this module:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"Ifn5fGG5cw"}],"key":"BUI4H66E4H"},{"type":"heading","depth":3,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"Functions and Subroutines","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"MBpELer0G5"}],"identifier":"functions-and-subroutines","label":"Functions and Subroutines","html_id":"functions-and-subroutines","implicit":true,"key":"zfPtPwRV5y"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":57,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"strong","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"num_records(filename)","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"prkeXbbHWK"}],"key":"W69BVpok5B"},{"type":"text","value":": This function counts and returns the number of records (lines) in a text file, typically used to determine the size of data before allocating memory for variables.","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"PutTsT846P"}],"key":"waP9EDUeo5"}],"key":"hmWdbqt1SS"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"strong","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"read_stock(filename, time, open, high, low, close, adjclose, volume)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"cNK4zMRU0B"}],"key":"c9FWlCgvuA"},{"type":"text","value":":","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"O6PodhKnY1"}],"key":"CGN3cGnwyC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":60,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reads daily stock prices from a CSV file specified by ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"Gq7afzCc5a"},{"type":"inlineCode","value":"filename","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"jTrwXr2jJd"},{"type":"text","value":".","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"fo2hfvTeY3"}],"key":"Fhs7MvbygK"}],"key":"qBr6nECVbN"},{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The stock data includes timestamps (","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"bP75lmQBNF"},{"type":"inlineCode","value":"time","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"yOAbcqQ6LF"},{"type":"text","value":") and various price metrics (","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"ZS4ypWOhY4"},{"type":"inlineCode","value":"open","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"mpnL9QFL0g"},{"type":"text","value":", ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"niE4tubM8p"},{"type":"inlineCode","value":"high","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"fwPJG09Zoo"},{"type":"text","value":", ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"Bas19jufvX"},{"type":"inlineCode","value":"low","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"ZqKpiW7t1C"},{"type":"text","value":", ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"V0gx64mEIC"},{"type":"inlineCode","value":"close","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"QIKWQu1jqH"},{"type":"text","value":", ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"Z04xFYTfEA"},{"type":"inlineCode","value":"adjclose","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"RPBIt6vI7a"},{"type":"text","value":", and ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"k3TnQxSp00"},{"type":"inlineCode","value":"volume","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"Kn2dMfWJou"},{"type":"text","value":").","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"ib7B7tWJB6"}],"key":"HpODD21zID"}],"key":"o6EHtLdcL6"},{"type":"listItem","spread":true,"position":{"start":{"line":62,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The subroutine first calculates the number of records using ","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"AdRQ8Kni3v"},{"type":"inlineCode","value":"num_records","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"aYBQvBW8u5"},{"type":"text","value":", allocates memory for the data arrays, and then reads each line of the file, storing the data in the respective arrays.","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"zVevuLUKFA"}],"key":"yESJaENaec"}],"key":"GM05jYKTcd"}],"key":"Manf1uny55"}],"key":"UyBtQvvZus"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"strong","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"write_stock(filename, time, price, mvavg, mvstd)","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"qANifCNCI5"}],"key":"fo07OWmWc0"},{"type":"text","value":":","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"rihMYtX0MN"}],"key":"nMOvs1IMY5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":65,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Writes derived stock data (like prices along with moving averages and moving standard deviations) to a file.","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"kbyduQdGN2"}],"key":"LwQnBo49zS"}],"key":"TPoKG3JflJ"},{"type":"listItem","spread":true,"position":{"start":{"line":66,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"This is useful for outputting processed data, perhaps for reporting or further analysis.","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"L5AuytAWyj"}],"key":"U3bZvTkInW"}],"key":"KSQejfv5Lv"}],"key":"n8qIKDP5p9"}],"key":"rtM78cDyij"}],"key":"RToK9IzTv7"},{"type":"heading","depth":3,"position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"Usage and Memory Management","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"wGzL8CDeLX"}],"identifier":"usage-and-memory-management","label":"Usage and Memory Management","html_id":"usage-and-memory-management","implicit":true,"key":"JiOOE0MAIM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":70,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The module relies on another module ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"W97eh7vEBB"},{"type":"inlineCode","value":"mod_alloc","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"i06QKkzVQG"},{"type":"text","value":" for dynamic memory allocation (","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"LQNEbovd40"},{"type":"inlineCode","value":"alloc","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"C3x84SEUbA"},{"type":"text","value":" function), though the contents of ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"MtOkSyysfQ"},{"type":"inlineCode","value":"mod_alloc","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"p4PV3n9Igl"},{"type":"text","value":" aren’t shown. This suggests a modular approach where memory management is abstracted away to improve code maintainability.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"zu3DuHkUlJ"}],"key":"a0zQsffteo"}],"key":"Qdhr3iOGmG"},{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Memory allocation and deallocation are carefully handled in the ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"I5wyVqrhEN"},{"type":"inlineCode","value":"read_stock","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"nubqCA6Suc"},{"type":"text","value":" subroutine to manage the memory efficiently and avoid memory leaks, especially important in Fortran where dynamic data structures are involved.","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"jcexFT27Z4"}],"key":"XVXkcA7fvE"}],"key":"DDtbZLfOiD"}],"key":"rAmQCXjLgi"},{"type":"heading","depth":3,"position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Design Considerations","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"BtnCtNVoeV"}],"identifier":"design-considerations","label":"Design Considerations","html_id":"design-considerations","implicit":true,"key":"jxL42f7uYl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":75,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The I/O operations are encapsulated within this module, which separates the data handling logic from the computational logic found in other parts of the program.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"EJjjcZghse"}],"key":"GtXPWOVtyR"}],"key":"Ha11zzj1Xa"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Using separate subroutines for reading and writing data ensures that the module handles all aspects of file I/O, making it reusable for different parts of the application that need to process input or output data.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"sPwnWA91NM"}],"key":"vVoWsTL9oU"}],"key":"oKMvSEww5g"}],"key":"Jab3ozPtE9"},{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"This module forms a critical component of the program by managing the flow of data in and out, ensuring that the main computational modules can focus solely on processing this data.","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"fG8ZLsEiJc"}],"key":"pPURkByVVB"},{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"If you have more specific questions about how any part of the code works or if you need further details on any other aspect, feel free to ask!","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"dSae3GYcML"}],"key":"ERYdejHvBY"}],"key":"x3JpsqoriT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Program Compilation and Execution","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uDIKKmScEc"}],"identifier":"program-compilation-and-execution","label":"Program Compilation and Execution","html_id":"program-compilation-and-execution","implicit":true,"key":"DU1dRmI28w"}],"key":"z8ExOqrSSY"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above program is compiled and run using Fortran Package Manager (fpm):","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DnlPwHqQSb"}],"key":"hph81yq9Yw"}],"key":"pxTr7NB5db"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Build the Program using FPM (Fortran Package Manager)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ExyHgj13oC"}],"identifier":"build-the-program-using-fpm-fortran-package-manager","label":"Build the Program using FPM (Fortran Package Manager)","html_id":"build-the-program-using-fpm-fortran-package-manager","implicit":true,"key":"kphC7IXe30"}],"visibility":"show","key":"dGMYiBkIas"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-09T03:43:46.224297Z","iopub.status.busy":"2024-05-09T03:43:46.223957Z","iopub.status.idle":"2024-05-09T03:43:46.273050Z","shell.execute_reply":"2024-05-09T03:43:46.261330Z","shell.execute_reply.started":"2024-05-09T03:43:46.224272Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import os\nroot_dir = \"\"\nroot_dir = os.getcwd()","key":"ZvWeYbcxOr"},{"type":"outputs","id":"mS9zs_530lhM1tXmEYnLy","children":[],"key":"ipOLb1S7as"}],"key":"XFxxAqcBZH"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The following FPM configuration file (fpm.toml) was used:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VzrmvpPOMa"}],"key":"kHIhn1hKpJ"}],"key":"UKd6WWccQ5"},{"type":"block","kind":"notebook-content","children":[{"type":"include","file":"Fortran_Code/Analyzing_Time_Series_Data_with_Arrays/fpm.toml","literal":true,"children":[{"type":"code","value":"name = \"Analyzing_Time_Series_Data_with_Arrays\"\n\n[build]\nauto-executables = true\nauto-tests = true\nauto-examples = true\n\n[install]\nlibrary = false\n\n[fortran]\nimplicit-typing = false\nimplicit-external = false\nsource-form = \"free\"\n\n[[executable]]\nname=\"Stock_Gain\"\nsource-dir=\"app\"\nmain=\"stock_gain.f90\"\n","lang":"toml","filename":"fpm.toml","key":"zQZZY9ixHM"}],"key":"ANwXxAQuuy"}],"key":"lCvc4Xhuhx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-09T03:43:51.274054Z","iopub.status.busy":"2024-05-09T03:43:51.273573Z","iopub.status.idle":"2024-05-09T03:43:51.280111Z","shell.execute_reply":"2024-05-09T03:43:51.278679Z","shell.execute_reply.started":"2024-05-09T03:43:51.274033Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"code_dir = root_dir + \"/\" + \"Fortran_Code/Analyzing_Time_Series_Data_with_Arrays\"","key":"wJfFkK6cav"},{"type":"outputs","id":"X2MfzAhB_Vgn_4m1s1AFR","children":[],"key":"RH3CKbvt4D"}],"key":"VyjjoUz20t"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-09T03:43:51.795899Z","iopub.status.busy":"2024-05-09T03:43:51.795223Z","iopub.status.idle":"2024-05-09T03:43:51.801730Z","shell.execute_reply":"2024-05-09T03:43:51.800843Z","shell.execute_reply.started":"2024-05-09T03:43:51.795862Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"os.chdir(code_dir)","key":"xYxsqY7InU"},{"type":"outputs","id":"nhnTwYVBKbG1U5xN0Fbbu","children":[],"key":"mA6kXqQLXI"}],"key":"ZXhv9T9hnC"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-09T03:43:53.339511Z","iopub.status.busy":"2024-05-09T03:43:53.339229Z","iopub.status.idle":"2024-05-09T03:43:53.507088Z","shell.execute_reply":"2024-05-09T03:43:53.506125Z","shell.execute_reply.started":"2024-05-09T03:43:53.339492Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"build_status = os.system(\"fpm build 2>/dev/null\")","key":"NhyhciHBfL"},{"type":"outputs","id":"EE01sTOlWiZlNYec0czef","children":[],"key":"iZF1s9iM9w"}],"key":"ZZjXO58ky4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Run the Program using FPM (Fortran Package Manager)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BvmWwbhYkL"}],"identifier":"run-the-program-using-fpm-fortran-package-manager","label":"Run the Program using FPM (Fortran Package Manager)","html_id":"run-the-program-using-fpm-fortran-package-manager","implicit":true,"key":"HUQPTtVPNP"}],"key":"dLFqENudOZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2024-05-09T03:43:55.627472Z","iopub.status.busy":"2024-05-09T03:43:55.627194Z","iopub.status.idle":"2024-05-09T03:43:55.778608Z","shell.execute_reply":"2024-05-09T03:43:55.777517Z","shell.execute_reply.started":"2024-05-09T03:43:55.627452Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"exec_status = \\\n    os.system(\"fpm run 2>/dev/null\")","key":"dkYSwqTPFM"},{"type":"outputs","id":"GiDp6kPYRovbAcfG-wQ6-","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":" 2000-01-03 through 2018-05-14\n Symbol, Gain (USD), Relative Gain (%)\n -------------------------------------\n AAPL   184.594589            5192\n AMZN   1512.16003            1692\n CRAY   9.60000038              56\n CSCO   1.71649933               4\n HPQ    1.55270004               7\n IBM    60.9193039              73\n INTC   25.8368015              89\n MSFT   59.4120979             154\n NVDA   251.745300            6964\n ORCL   20.3501987              77\n"},"children":[],"key":"P5mbqQToyt"}],"key":"Dh8BUyAso2"}],"key":"bEuUfzWhmX"}],"key":"YIHqz79UYM"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Print Compiler Version","url":"/sections/computer-programming/fortran/modern-fortran/print-compiler-version","group":"Computer Programming"},"next":{"title":"Introduction to Programming Using Fortran","url":"/sections/computer-programming/fortran/intro-to-fortran/intro-to-fortran-head","group":"Computer Programming"}}},"domain":"http://localhost:3008"}